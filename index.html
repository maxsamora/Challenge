<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Hack My Heart ‚ù§Ô∏è</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root { --green: #00ff7f; --pink: #e91e63; }
    html, body { margin:0; height:100%; }
    body { font-family: "Courier New", monospace; background:#000; color:var(--green); }

    /* TERMINAL SCREEN */
    #terminal {
      white-space: pre-wrap;
      padding: 24px;
      font-size: 1rem;
      line-height: 1.5;
      min-height: 100vh;
      background: #000;
    }

    /* QUIZ SCREEN */
    #quiz-container {
      display: none;
      min-height: 100vh;
      background: #000;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 40px 16px 80px;
      box-sizing: border-box;
    }
    .panel {
      max-width: 720px;
      margin: 0 auto;
      background: rgba(0,0,0,.4);
      border: 1px solid rgba(0,255,127,.2);
      border-radius: 10px;
      padding: 20px;
    }
    h1 { margin-top:0; }
    .question { margin-bottom: 14px; }
    input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #444;
      background: #111;
      color: #fff;
      font-size: 1rem;
    }
    button {
      background: var(--pink);
      color: #fff;
      border: none;
      padding: 9px 14px;
      border-radius: 6px;
      margin-top: 12px;
      cursor: pointer;
      font-weight: 600;
    }
    #feedback { margin-top: 10px; color: #ffb3b3; font-weight: bold; }

    /* FINAL SCREEN */
    #final {
      display: none;
      text-align: center;
      margin-top: 30px;
    }

    /* HEART CANVAS */
    #hearts {
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
    }

    /* PLAY BUTTON (when autoplay blocked) */
    #playbtn {
      position: fixed;
      right: 16px;
      bottom: 16px;
      background: rgba(0,0,0,.7);
      color: #fff;
      border: 1px solid #fff;
      border-radius: 6px;
      padding: 8px 12px;
      cursor: pointer;
      display: none;
      z-index: 10000;
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <!-- hacker intro -->
  <div id="terminal"></div>

  <!-- quiz -->
  <div id="quiz-container">
    <div class="panel">
      <h1>üéØ Hack Game</h1>
      <p>Answer all questions to find out who sent you the flowers.</p>
      <div id="quiz">
        <div class="question" id="qtext"></div>
        <input id="answer" type="text" placeholder="type your answer..." autocomplete="off" />
        <br>
        <button onclick="checkAnswer()">Submit</button>
        <p id="feedback"></p>
      </div>
      <div id="final">
        <h2>üíñ You hacked my heart!</h2>
        <p>It was me ‚Äî <strong>Maxwell</strong> üíå</p>
      </div>
    </div>
  </div>

  <!-- music -->
  <audio id="song" src="onedance.mp3" preload="auto" loop></audio>
  <!-- hearts -->
  <canvas id="hearts"></canvas>
  <!-- fallback button -->
  <button id="playbtn" onclick="forcePlay()">Play music</button>

<script>
/* =============== TERMINAL INTRO =============== */
const introLines = [
  "happy day, sol√®ne delacourt...",
  "how about we play a game to discover who your secret admirer is...",
  "after you hack this game you'll know who sent you these flowers.",
  "",
  "initializing love-terminal...",
  "bypassing romantic firewall...",
  "decrypting feelings...",
  "access granted."
];
const terminal = document.getElementById('terminal');
let introIndex = 0;

function typeIntro() {
  if (introIndex < introLines.length) {
    terminal.textContent += introLines[introIndex] + "\n";
    introIndex++;
    setTimeout(typeIntro, 1100);
  } else {
    setTimeout(() => {
      // show quiz
      document.getElementById('terminal').style.display = "none";
      document.getElementById('quiz-container').style.display = "block";
      showQuestion();
    }, 700);
  }
}

/* =============== MUSIC AUTOPLAY =============== */
const song = document.getElementById('song');
const playbtn = document.getElementById('playbtn');
let musicStarted = false;

function tryPlayMusic() {
  song.volume = 0.7;
  const p = song.play();
  if (p !== undefined) {
    p.then(() => {
      musicStarted = true;
      playbtn.style.display = "none";
    }).catch(() => {
      // autoplay blocked
      playbtn.style.display = "block";
    });
  } else {
    playbtn.style.display = "block";
  }
}

function forcePlay() {
  song.play().then(() => {
    musicStarted = true;
    playbtn.style.display = "none";
  }).catch(() => {
    // if still blocked we leave the button
  });
}

/* =============== QUIZ LOGIC =============== */
const questions = [
  { q: "What is my country of origin?", answers: ["brazil","brasil"] },
  { q: "Where do I live currently?", answers: ["sydney"] },
  { q: "How many siblings do I have?", answers: ["3","three"] },
  { q: "What is my favorite color?", answers: ["red","vermelha"] },
  { q: "What was the first gift you got from me?", answers: ["friends socks","socks friends","meia friends","friends sock"] },
  { q: "What is the color of my body?", answers: ["brown"] },
  { q: "What is the first word that comes to your mind when you think of me?", answers: ["gostoso"] },
  { q: "Which song reminds you of me?", answers: ["one dance","drake one dance"] }
];
let current = 0;

function showQuestion() {
  document.getElementById('qtext').textContent = questions[current].q;
  document.getElementById('answer').value = "";
  document.getElementById('answer').focus();
  document.getElementById('feedback').textContent = "";
}

function normalize(str) {
  return (str || "").trim().toLowerCase();
}

function checkAnswer() {
  const user = normalize(document.getElementById('answer').value);
  const valid = questions[current].answers.map(a => a.toLowerCase().trim());

  if (valid.includes(user)) {
    current++;
    if (current >= questions.length) {
      // end
      document.getElementById('quiz').style.display = "none";
      document.getElementById('final').style.display = "block";
      if (!musicStarted) {
        forcePlay();
      }
      startHearts();
    } else {
      showQuestion();
    }
  } else {
    document.getElementById('feedback').textContent = "Try again üëÄ";
  }
}

/* =============== HEARTS ANIMATION =============== */
function startHearts() {
  const canvas = document.getElementById('hearts');
  const ctx = canvas.getContext('2d');
  const DPR = window.devicePixelRatio || 1;
  canvas.width = window.innerWidth * DPR;
  canvas.height = window.innerHeight * DPR;
  canvas.style.width = window.innerWidth + "px";
  canvas.style.height = window.innerHeight + "px";
  ctx.scale(DPR, DPR);

  const hearts = Array.from({length: 50}).map(() => ({
    x: Math.random() * window.innerWidth,
    y: -Math.random() * window.innerHeight,
    size: Math.random() * 18 + 10,
    speed: Math.random() * 1.8 + 0.8,
    color: "hsl(" + (Math.random()*30+330) + ", 80%, 60%)"
  }));

  function drawHeart(x,y,size,color) {
    ctx.save();
    ctx.fillStyle = color;
    ctx.beginPath();
    const top = size * 0.3;
    ctx.moveTo(x, y + top);
    ctx.bezierCurveTo(x, y, x - size/2, y, x - size/2, y + top);
    ctx.bezierCurveTo(x - size/2, y + (size+top)/2, x, y + (size+top)/1.3, x, y + size);
    ctx.bezierCurveTo(x, y + (size+top)/1.3, x + size/2, y + (size+top)/2, x + size/2, y + top);
    ctx.bezierCurveTo(x + size/2, y, x, y, x, y + top);
    ctx.closePath();
    ctx.fill();
    ctx.restore();
  }

  function frame() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for (const h of hearts) {
      drawHeart(h.x, h.y, h.size, h.color);
      h.y += h.speed;
      h.x += Math.sin(h.y/25) * 0.6;
      if (h.y > window.innerHeight + h.size) {
        h.y = -h.size;
        h.x = Math.random() * window.innerWidth;
      }
    }
    requestAnimationFrame(frame);
  }
  frame();
}

/* =============== INIT =============== */
window.onload = function() {
  tryPlayMusic();  // try from start
  typeIntro();     // start hacker text
};
</script>
</body>
</html>
